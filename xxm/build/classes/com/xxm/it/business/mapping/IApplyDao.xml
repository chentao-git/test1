<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xxm.it.business.dao.IApplyDao" >
	<sql id="query_apply_info_sql">
		 SELECT
			t.apply_Info_Id AS applyInfoId,
			t.loan_Contract_No AS loanContractNo,
			t.production_Vl AS productionVl,
			getBaseDateNameByCode('PRODUCE_TYPE',t.production_Vl,1) AS "productionName",
			u.name AS salesmanName,
			t.salesman AS salesman,
			t.stock_Car_Vl AS stockCarVl,
			getBaseDateNameByCode('STOCK_CAR',t.stock_Car_Vl,1) AS "stockCarName",
			t.operating_Company_Vl AS operatingCompanyVl,
			t.auto_Dealer_Vl AS autoDealerVl,
			getBaseDateNameByCode('AUTO_DEALER',t.auto_Dealer_Vl,1) AS "autoDealerName",
			t.insurance_Company_Vl AS insuranceCompanyVl,
			getBaseDateNameByCode('INSURANCE_COMPANY',t.insurance_Company_Vl,1) AS "insuranceCompanyName",
			t.management_Of_Capital_Vl AS managementOfCapitalVl,
			getBaseDateNameByCode('THE_INVESTOR',t.management_Of_Capital_Vl,1) AS "managementOfCapitalName",
			t.loan_Bank_Vl AS loanBankVl,
			t.loan_Business_Vl AS loanBusinessVl,
			t.vehicle_Type_Vl AS vehicleTypeVl,
			t.apply_Customer_Id AS applyCustomerId,
			t.company_Affiliated_Id AS companyAffiliatedId,
			t.mkt_prod_type AS mktProdType,
			getBaseDateNameByCode('MKTPROD_TYPE',t.mkt_prod_type,1) AS "mktProdTypeName",
			t.coopr_prod_type AS cooprProdType,
			getBaseDateNameByCode('COOPRPROD_TYPE',t.coopr_prod_type,1) AS "cooprProdTypeName",
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate,
			c.customer_Id AS "customerVO.customerId",
			c.base_Customer_Name AS "customerVO.baseCustomerName",
			t.apply_info_status AS  applyInfoStatus,
			getBaseDateNameByCode('APPLY_STATUS',t.apply_info_status,1) AS "applyInfoStatusName",
			
			c.cert_Type AS "customerVO.certType",
			getBaseDateNameByCode('BAQSNG_PAPER_TYPE',c.cert_Type,1) AS "customerVO.certTypeName",
			c.mobile_no AS "customerVO.mobileNo",
			c.cert_No AS "customerVO.certNo",
			
			r.prejudic_no AS "rejudicationReturnVO.prejudicNo",
			r.result_message as "rejudicationReturnVO.resultMessage",
			
			p.proposal_no AS "policyinfoReturnVO.proposalNo",
			p.save_message as "policyinfoReturnVO.saveMessage",
			au.apply_no AS applyNo
		FROM
			xxm_apply_info_t t
		LEFT JOIN xxm_customer_t c ON c.customer_Id = t.apply_Customer_Id
		LEFT JOIN xxm_base_customer_t b ON b.base_Customer_Id = c.base_Customer_Id
		LEFT JOIN ms_rejudication_return r ON  r.prejudication_return_id=(select max(prejudication_return_id) from ms_rejudication_return where request_Id=t.apply_Info_Id)
		LEFT JOIN ms_policyinfo_return p ON  p.policyInfo_return_id=(select max(policyInfo_return_id) from ms_policyinfo_return where apply_Info_Id=t.apply_Info_Id)
		LEFT JOIN ms_auditinfo au ON  au.auditInfo_id=(select max(auditInfo_id) from ms_auditinfo where prejudic_no=r.prejudic_no)
		LEFT JOIN xxm_user_t u ON u.user_id = t.salesman
		WHERE
			1 = 1
	</sql>
	
	<sql id="apply_info_select_condition">
		<if test="applyInfoId != null and applyInfoId !=''">
	    	AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="proposalNo != null and proposalNo !=''">
	    	AND p.proposal_no=#{proposalNo,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="loanContractNo != null and loanContractNo !=''">
	    	AND t.loan_Contract_No=#{loanContractNo,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="applyInfoStatus != null and applyInfoStatus !=''">
	    	AND t.apply_info_status=#{applyInfoStatus,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="customerVO.baseCustomerName != null and customerVO.baseCustomerName !=''">
	    	AND c.base_Customer_Name like concat('%',#{customerVO.baseCustomerName,jdbcType=VARCHAR},'%')
	  	 </if>
	  	 <if test="customerVO.certNo != null and customerVO.certNo != ''">
	  	    AND c.cert_No=#{customerVO.certNo,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="productionVl != null and productionVl != ''">
	  	    AND t.production_Vl=#{productionVl,jdbcType=VARCHAR}
	  	 </if>
	  	 <if test="createDate != null and createDate != ''">
	  	   AND ( datediff ( t.create_date , #{createDate,jdbcType=VARCHAR}) <![CDATA[>=]]> 0 )
	  	 </if>
	  	 <if test="lastUpdateDate != null and lastUpdateDate != ''">
	  	   AND ( datediff ( t.last_update_date , #{lastUpdateDate,jdbcType=VARCHAR}) <![CDATA[<=]]> 0 )
	  	 </if>
	  	 <if test="isValid =='0'.toString()">
	    	AND t.apply_info_status!=0
	  	 </if>
	  	 <if test="isValid =='2'.toString()">
	    	AND t.apply_info_status!=0
	  	 </if>
	  	 <if test="isValid =='3'.toString()">
	    	AND t.apply_info_status!=0
	  	 </if>
	  	 <if test="customerVO.baseCustomerId != null and customerVO.baseCustomerId != ''">
  	 		AND b.base_Customer_Id = #{customerVO.baseCustomerId,jdbcType=VARCHAR}
	  	 </if>
	</sql>
	
	<!-- 查询申请信息列表 -->
	<select id="findApplyInfoList" resultType="com.xxm.it.business.vo.ApplyVO" parameterType="com.xxm.it.business.vo.ApplyVO">
		 <include refid="query_apply_info_sql"></include>
		 <include refid="apply_info_select_condition"></include>
		order by t.create_date desc
		limit #{offset,jdbcType=VARCHAR},#{limit,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询申请信息列表总数-->
	<select id="findApplyInfoListCount" resultType="java.lang.Integer" parameterType="com.xxm.it.business.vo.ApplyVO">
		 SELECT count(apply_Info_Id) FROM xxm_apply_info_t t 
		 LEFT JOIN xxm_customer_t c ON c.customer_Id = t.apply_Customer_Id
		 LEFT JOIN xxm_base_customer_t b ON b.base_Customer_Id = c.base_Customer_Id
		 LEFT JOIN xxm_user_t u ON u.user_id = t.salesman
		 WHERE 1=1
		 <include refid="apply_info_select_condition"></include>
	</select>
	
	<!-- 添加申请信息 -->
	<insert id="addApply" parameterType="com.xxm.it.business.vo.ApplyVO" useGeneratedKeys="true" keyProperty="applyInfoId">
		 INSERT INTO xxm_apply_info_t (
			loan_Contract_No,
			production_Vl,
			stock_Car_Vl,
			operating_Company_Vl,
			auto_Dealer_Vl,
			insurance_Company_Vl,
			management_Of_Capital_Vl,
			loan_Bank_Vl,
			loan_Business_Vl,
			vehicle_Type_Vl,
			apply_Customer_Id,
			<if test="companyAffiliatedId != null and companyAffiliatedId !=''">
	    		company_Affiliated_Id,
	  	 	</if>
	  	 	<if test="applyInfoStatus != null and applyInfoStatus !=''">
	    		apply_info_status,
	  	 	</if>
	  	 	mkt_prod_type,
			coopr_prod_type,
			insured_plan_id,
			citem_car_id,
			insured_creditInvest,
			citem_credit_id,
			applicant_id,
			file_key_list,
			prejudic_no,
			salesman,
			bank_code,
			maincom_code,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{loanContractNo,jdbcType=VARCHAR},
				#{productionVl,jdbcType=VARCHAR},
				#{stockCarVl,jdbcType=VARCHAR},
				#{operatingCompanyVl,jdbcType=VARCHAR},
				#{autoDealerVl,jdbcType=VARCHAR},
				#{insuranceCompanyVl,jdbcType=VARCHAR},
				#{managementOfCapitalVl,jdbcType=VARCHAR},
				#{loanBankVl,jdbcType=VARCHAR},
				#{loanBusinessVl,jdbcType=VARCHAR},
				#{vehicleTypeVl,jdbcType=VARCHAR},
				#{applyCustomerId,jdbcType=VARCHAR},
				<if test="companyAffiliatedId != null and companyAffiliatedId !=''">
	    			#{companyAffiliatedId,jdbcType=VARCHAR},
	  	 		</if>
	  	 		<if test="applyInfoStatus != null and applyInfoStatus !=''">
	    			#{applyInfoStatus,jdbcType=VARCHAR},
	  	 		</if>
	  	 		#{mktProdType,jdbcType=VARCHAR},
				#{cooprProdType,jdbcType=VARCHAR},
				#{insuredPlanId,jdbcType=VARCHAR},
				#{citemCarId,jdbcType=VARCHAR},
				#{insuredCreditInvest,jdbcType=VARCHAR},
				#{citemCreditId,jdbcType=VARCHAR},
				#{applicantId,jdbcType=VARCHAR},
				#{fileKeyList,jdbcType=VARCHAR},
				#{prejudicNo,jdbcType=VARCHAR},
				#{salesman,jdbcType=VARCHAR},
				#{bankCode,jdbcType=VARCHAR},
				#{maincomCode,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 查询申请信息-->
	<select id="findApplyInfo" resultType="com.xxm.it.business.vo.ApplyVO" parameterType="com.xxm.it.business.vo.ApplyVO">
		 <include refid="query_apply_info_sql"></include>
	  	 <include refid="apply_info_select_condition"></include>
	</select>
	
	<!-- 查询申请信息(List)-->
	<select id="findApplyInfos" resultType="com.xxm.it.business.vo.ApplyVO" parameterType="com.xxm.it.business.vo.ApplyVO">
		 <include refid="query_apply_info_sql"></include>
		 <include refid="apply_info_select_condition"></include>
	</select>
	
	<update id="updateApplyInfo" parameterType="com.xxm.it.business.vo.ApplyVO">
		UPDATE xxm_apply_info_t SET 
<!-- 			loan_Contract_No = #{loanContractNo,jdbcType=VARCHAR}, -->
			<if test="productionVl != null and productionVl !=''">
				production_Vl = #{productionVl,jdbcType=VARCHAR},
			</if>
			<if test="stockCarVl != null and stockCarVl !=''">
				stock_Car_Vl = #{stockCarVl,jdbcType=VARCHAR},
			</if>
			<if test="operatingCompanyVl != null and operatingCompanyVl !=''">
				operating_Company_Vl = #{operatingCompanyVl,jdbcType=VARCHAR},
			</if>
			<if test="autoDealerVl != null and autoDealerVl !=''">
				auto_Dealer_Vl = #{autoDealerVl,jdbcType=VARCHAR},
			</if>
			<if test="insuranceCompanyVl != null and insuranceCompanyVl !=''">
				insurance_Company_Vl = #{insuranceCompanyVl,jdbcType=VARCHAR},
			</if>
			<if test="managementOfCapitalVl != null and managementOfCapitalVl !=''">
				management_Of_Capital_Vl = #{managementOfCapitalVl,jdbcType=VARCHAR},
			</if>
			<if test="loanBankVl != null and loanBankVl !=''">
				loan_Bank_Vl = #{loanBankVl,jdbcType=VARCHAR},
			</if>
			<if test="loanBusinessVl != null and loanBusinessVl !=''">
				loan_Business_Vl = #{loanBusinessVl,jdbcType=VARCHAR},
			</if>
			<if test="vehicleTypeVl != null and vehicleTypeVl !=''">
				vehicle_Type_Vl = #{vehicleTypeVl,jdbcType=VARCHAR},
			</if>
			<if test="applyCustomerId != null and applyCustomerId !=''">
	    		apply_Customer_Id = #{applyCustomerId,jdbcType=VARCHAR},
	  	 	</if>
			<if test="companyAffiliatedId != null and companyAffiliatedId !=''">
	    		company_Affiliated_Id = #{companyAffiliatedId,jdbcType=VARCHAR},
	  	 	</if>
	  	 	<if test="applyInfoStatus != null and applyInfoStatus !=''">
				apply_info_status = #{applyInfoStatus,jdbcType=VARCHAR},
			</if>
			<if test="mktProdType != null and mktProdType !=''">
				mkt_prod_type = #{mktProdType,jdbcType=VARCHAR},
			</if>
			<if test="cooprProdType != null and cooprProdType !=''">
				coopr_prod_type = #{cooprProdType,jdbcType=VARCHAR},
			</if>
			<if test="cooprProdType != null and cooprProdType !=''">
				coopr_prod_type = #{cooprProdType,jdbcType=VARCHAR},
			</if>
			<if test="salesman != null and salesman !=''">
				salesman = #{salesman,jdbcType=VARCHAR},
			</if>
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			apply_Info_Id = #{applyInfoId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增补充基本信息 -->
	<insert id="addSupplementBase" parameterType="com.xxm.it.business.vo.SupplementBaseVO" useGeneratedKeys="true" keyProperty="supplementBaseId">
		 INSERT INTO xxm_supplement_base_t (
			payment_Approach_VL,
			payment_Method_VL,
			payment_Periods,
			is_Auto_Pay,
			interest_Calculated_VL,
			interest,
			pay_Bearer_VL,
			service_Charge,
			payment_Date_Type_VL,
			payment_Date_Num,
			guarantee_Calculated_VL,
			agent_Service_Charge,
			guarantee,
			rate_Of_Premium,
			prepayment_VL,
			default_Interest_VL,
			let_Off_Date,
			overdue_Interest,
			no_first_flag,
			taxi_com_quantity,
			enterp_quantity,
			guarantee_type,
			guarantee_name,
			deliver_date,
			mortgage_no,
			loan_contract_no,
			loan_start_date,
			loan_end_date,
			firstpay_rAate,
			first_rate,
			own_liab_ratio,
			other_liab_ratio,
			recognizance,
			loan_amount,
			loan_rate,
			per_repaid_amount,
			repy_fq,
			loan_purpost,
			use_nature,
			uses_tp,
			is_loan_account,
			loan_acount,
			loan_acount_no,
			loan_acount_bank,
			loan_acount_bankNo,
			apply_currency,
			apply_amt,
			appl_nosInst,
			apply_date,
			atrs_due_day,
			next_repc_option,
			fix_rateInd,
			int_adj_pct,
			cust_rate,
			apply_purpost,
			apply_no,
			mkt_prod_type,
			contct,
			tel_num,
			dler_ph,
			link_type,
			link_name,
			link_phone,
			serial_no,
			risk_code,
			start_date,
			end_date,
			start_hour,
			end_hour,
			sum_amount,
			sum_premium,
			argu_solution,
			iscoin_type_flag,
			apply_Info_Id,
			first_paid,
			tate_mode,
			apply_loans_amount,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{paymentApproachVL,jdbcType=VARCHAR},
				#{paymentMethodVL,jdbcType=VARCHAR},
				#{paymentPeriods,jdbcType=VARCHAR},
				#{isAutoPay,jdbcType=VARCHAR},
				#{interestCalculatedVL,jdbcType=VARCHAR},
				#{interest,jdbcType=VARCHAR},
				#{payBearerVL,jdbcType=VARCHAR},
				#{serviceCharge,jdbcType=VARCHAR},
				#{paymentDateTypeVL,jdbcType=VARCHAR},
				#{paymentDateNum,jdbcType=VARCHAR},
				#{guaranteeCalculatedVL,jdbcType=VARCHAR},
				#{agentServiceCharge,jdbcType=VARCHAR},
				#{guarantee,jdbcType=VARCHAR},
				#{rateOfPremium,jdbcType=VARCHAR},
				#{prepaymentVL,jdbcType=VARCHAR},
				#{defaultInterestVL,jdbcType=VARCHAR},
				#{letOffDate,jdbcType=VARCHAR},
				#{overdueInterest,jdbcType=VARCHAR},
				#{noFirstFlag,jdbcType=VARCHAR},
				#{taxiComQuantity,jdbcType=VARCHAR},
				#{enterpQuantity,jdbcType=VARCHAR},
				#{guaranteeType,jdbcType=VARCHAR},
				#{guaranteeName,jdbcType=VARCHAR},
				#{deliverDate,jdbcType=VARCHAR},
				#{mortgageNo,jdbcType=VARCHAR},
				#{loanContractNo,jdbcType=VARCHAR},
				#{loanStartDate,jdbcType=VARCHAR},
				#{loanEndDate,jdbcType=VARCHAR},
				#{firstpayRAate,jdbcType=VARCHAR},
				#{firstRate,jdbcType=VARCHAR},
				#{ownLiabRatio,jdbcType=VARCHAR},
				#{otherLiabRatio,jdbcType=VARCHAR},
				#{recognizance,jdbcType=VARCHAR},
				#{loanAmount,jdbcType=VARCHAR},
				#{loanRate,jdbcType=VARCHAR},
				#{perRepaidAmount,jdbcType=VARCHAR},
				#{repyFq,jdbcType=VARCHAR},
				#{loanPurpost,jdbcType=VARCHAR},
				#{useNature,jdbcType=VARCHAR},
				#{usesTp,jdbcType=VARCHAR},
				#{isLoanAccount,jdbcType=VARCHAR},
				#{loanAcount,jdbcType=VARCHAR},
				#{loanAcountNo,jdbcType=VARCHAR},
				#{loanAcountBank,jdbcType=VARCHAR},
				#{loanAcountBankNo,jdbcType=VARCHAR},
				#{applyCurrency,jdbcType=VARCHAR},
				#{applyAmt,jdbcType=VARCHAR},
				#{applNosInst,jdbcType=VARCHAR},
				#{applyDate,jdbcType=VARCHAR},
				#{atrsDueDay,jdbcType=VARCHAR},
				#{nextRepcOption,jdbcType=VARCHAR},
				#{fixRateInd,jdbcType=VARCHAR},
				#{intAdjPct,jdbcType=VARCHAR},
				#{custRate,jdbcType=VARCHAR},
				#{applyPurpost,jdbcType=VARCHAR},
				#{applyNo,jdbcType=VARCHAR},
				#{mktProdType,jdbcType=VARCHAR},
				#{contct,jdbcType=VARCHAR},
				#{telNum,jdbcType=VARCHAR},
				#{dlerPh,jdbcType=VARCHAR},
				#{linkType,jdbcType=VARCHAR},
				#{linkName,jdbcType=VARCHAR},
				#{linkPhone,jdbcType=VARCHAR},
				#{serialNo,jdbcType=VARCHAR},
				#{riskCode,jdbcType=VARCHAR},
				#{startDate,jdbcType=VARCHAR},
				#{endDate,jdbcType=VARCHAR},
				#{startHour,jdbcType=VARCHAR},
				#{endHour,jdbcType=VARCHAR},
				#{sumAmount,jdbcType=VARCHAR},
				#{sumPremium,jdbcType=VARCHAR},
				#{arguSolution,jdbcType=VARCHAR},
				#{iscoinTypeFlag,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{firstPaid,jdbcType=VARCHAR},
				#{tateMode,jdbcType=VARCHAR},
				#{applyLoansAmount,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增报价信息 -->
	<insert id="addQuotedPrice" parameterType="com.xxm.it.business.vo.QuotedPriceVO" useGeneratedKeys="true" keyProperty="quotedPriceId">
		 INSERT INTO xxm_quoted_price_t (
			actual_Price,
			pre_Rent_Rate_VL,
			supplier_Cash_Pool,
			sign_Date,
			factory_Discount,
			consulting_Fee,
			plan_VL,
			purchase_Price,
			service_Charge,
			apply_Info_Id,
			down_payment,
			financing_amount,
			rent_total_amount,
			interest_total_amount,
			amount_insured,
			guide_price,
			collect_premium,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{actualPrice,jdbcType=VARCHAR},
				#{preRentRateVL,jdbcType=VARCHAR},
				#{supplierCashPool,jdbcType=VARCHAR},
				#{signDate,jdbcType=VARCHAR},
				#{factoryDiscount,jdbcType=VARCHAR},
				#{consultingFee,jdbcType=VARCHAR},
				#{planVL,jdbcType=VARCHAR},
				#{purchasePrice,jdbcType=VARCHAR},
				#{serviceCharge,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{downPayment,jdbcType=VARCHAR},
				#{financingAmount,jdbcType=VARCHAR},
				#{rentTotalAmount,jdbcType=VARCHAR},
				#{interestTotalAmount,jdbcType=VARCHAR},
				#{amountInsured,jdbcType=VARCHAR},
				#{guidePrice,jdbcType=VARCHAR},
				#{collectPremium,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增还款计划 -->
	<insert id="addRepaymentPlan" parameterType="com.xxm.it.business.vo.RepaymentPlanVO" useGeneratedKeys="true" keyProperty="repaymentPlanId">
		 INSERT INTO xxm_repayment_plan_t (
			periods,
			return_Principal,
			return_Interest,
			return_Default_interest,
			guarantee_Fee,
			amount_Payable,
			return_Date,
			remarks,
			quoted_price_id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{periods,jdbcType=VARCHAR},
				#{returnPrincipal,jdbcType=VARCHAR},
				#{returnInterest,jdbcType=VARCHAR},
				#{returnDefaultInterest,jdbcType=VARCHAR},
				#{guaranteeFee,jdbcType=VARCHAR},
				#{amountPayable,jdbcType=VARCHAR},
				#{returnDate,jdbcType=VARCHAR},
				#{remarks,jdbcType=VARCHAR},
				#{quotedPriceId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增租赁物基础信息表-->
	<insert id="addBaseLeaseInfo" parameterType="com.xxm.it.business.vo.BaseLeaseInfoVO" useGeneratedKeys="true" keyProperty="baseLeaseInfoId">
		 INSERT INTO xxm_base_lease_info_t (
			car_Type_VL,
			manufacturer,
			brand,
			car_Name,
			model,
			leasehold_Use,
			leasehold_Area,
			engine_Number,
			frame_Number,
			driving_Form,
			engine_Model,
			engine_Power,
			car_Color,
			plate_Number,
			other_Instructions,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{carTypeVL,jdbcType=VARCHAR},
				#{manufacturer,jdbcType=VARCHAR},
				#{brand,jdbcType=VARCHAR},
				#{carName,jdbcType=VARCHAR},
				#{model,jdbcType=VARCHAR},
				#{leaseholdUse,jdbcType=VARCHAR},
				#{leaseholdArea,jdbcType=VARCHAR},
				#{engineNumber,jdbcType=VARCHAR},
				#{frameNumber,jdbcType=VARCHAR},
				#{drivingForm,jdbcType=VARCHAR},
				#{engineModel,jdbcType=VARCHAR},
				#{enginePower,jdbcType=VARCHAR},
				#{carColor,jdbcType=VARCHAR},
				#{plateNumber,jdbcType=VARCHAR},
				#{otherInstructions,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增车辆保险表-->
	<insert id="addCarInsurance" parameterType="com.xxm.it.business.vo.CarInsuranceVO" useGeneratedKeys="true" keyProperty="carInsuranceId">
		 INSERT INTO xxm_car_insurance_t (
			car_Type_VL,
			third_Insurance_VL,
			risk_Glass_Breakage,
			other_Insurance1,
			other_Insurance2,
			other_Insurance3,
			other_Insurance4,
			other_Insurance5,
			major_Insurance_VLS,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{carTypeVL,jdbcType=VARCHAR},
				#{thirdInsuranceVL,jdbcType=VARCHAR},
				#{riskGlassBreakage,jdbcType=VARCHAR},
				#{otherInsurance1,jdbcType=VARCHAR},
				#{otherInsurance2,jdbcType=VARCHAR},
				#{otherInsurance3,jdbcType=VARCHAR},
				#{otherInsurance4,jdbcType=VARCHAR},
				#{otherInsurance5,jdbcType=VARCHAR},
				#{majorInsuranceVLS,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增保证保险表-->
	<insert id="addGuaranteeInsurance" parameterType="com.xxm.it.business.vo.GuaranteeInsuranceVO" useGeneratedKeys="true" keyProperty="guaranteeInsuranceId">
		 INSERT INTO xxm_guarantee_insurance_t (
			car_Type_VL,
			main_Insurance_Company,
			insurance_Company_VL,
			letter_Intent_No,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{carTypeVL,jdbcType=VARCHAR},
				#{mainInsuranceCompany,jdbcType=VARCHAR},
				#{insuranceCompanyVL,jdbcType=VARCHAR},
				#{letterIntentNo,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 新增保证保险表-->
	<insert id="addSponsor" parameterType="com.xxm.it.business.vo.SponsorVO" useGeneratedKeys="true" keyProperty="sponsorId">
		 INSERT INTO xxm_sponsor_t (
			sponsor_Name,
			sponsor_Sex,
			cert_Type_VL,
			cert_No,
			sponsor_Mobile,
			relation_VL,
			native_Place,
			sponsor_Age,
			education_Type_VL,
			company_Name,
			company_Addr,
			income,
			company_Phone,
			position,
			other_Income,
			telephone,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{sponsorName,jdbcType=VARCHAR},
				#{sponsorSex,jdbcType=VARCHAR},
				#{certTypeVL,jdbcType=VARCHAR},
				#{certNo,jdbcType=VARCHAR},
				#{sponsorMobile,jdbcType=VARCHAR},
				#{relationVL,jdbcType=VARCHAR},
				#{nativePlace,jdbcType=VARCHAR},
				#{sponsorAge,jdbcType=VARCHAR},
				#{educationTypeVL,jdbcType=VARCHAR},
				#{companyName,jdbcType=VARCHAR},
				#{companyAddr,jdbcType=VARCHAR},
				#{income,jdbcType=VARCHAR},
				#{companyPhone,jdbcType=VARCHAR},
				#{position,jdbcType=VARCHAR},
				#{otherIncome,jdbcType=VARCHAR},
				#{telephone,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 查询基本信息补充 -->
	<select id="findSupplementBase" parameterType="com.xxm.it.business.vo.SupplementBaseVO" resultType="com.xxm.it.business.vo.SupplementBaseVO">
		SELECT
			t.supplement_Base_Id AS supplementBaseId,
			t.payment_Approach_VL AS paymentApproachVL,
			getBaseDateNameByCode('PAYMENT_APPROACH',t.payment_Approach_VL,1) AS "paymentApproachName",
			t.payment_Method_VL AS paymentMethodVL,
			getBaseDateNameByCode('PAYMENT_METHOD',t.payment_Method_VL,1) AS "paymentMethodName",
			t.payment_Periods AS paymentPeriods,
			t.is_Auto_Pay AS isAutoPay,
			getBaseDateNameByCode('AUTO_PAY',t.is_Auto_Pay,1) AS "isAutoPayName",
			t.interest_Calculated_VL AS interestCalculatedVL,
			getBaseDateNameByCode('INTEREST_CALCULATED',t.interest_Calculated_VL,1) AS "interestCalculatedName",
			t.interest AS interest,
			t.pay_Bearer_VL AS payBearerVL,
			getBaseDateNameByCode('PAY_BEARER',t.pay_Bearer_VL,1) AS "payBearerName",
			t.service_Charge AS serviceCharge,
			t.payment_Date_Type_VL AS paymentDateTypeVL,
			getBaseDateNameByCode('PAYMENT_DATE_TYP',t.payment_Date_Type_VL,1) AS "paymentDateTypeName",
			t.payment_Date_Num AS paymentDateNum,
			t.guarantee_Calculated_VL AS guaranteeCalculatedVL,
			getBaseDateNameByCode('GUARANTEE_CALCULATED',t.guarantee_Calculated_VL,1) AS "guaranteeCalculatedName",
			t.agent_Service_Charge AS agentServiceCharge,
			t.guarantee AS guarantee,
			t.rate_Of_Premium AS rateOfPremium,
			t.prepayment_VL AS prepaymentVL,
			getBaseDateNameByCode('PREPAYMENT',t.prepayment_VL,1) AS "prepaymentName",
			t.default_Interest_VL AS defaultInterestVL,
			getBaseDateNameByCode('DEFAULT_INTEREST',t.default_Interest_VL,1) AS "defaultInterestName",
			t.let_Off_Date AS letOffDate,
			t.overdue_Interest AS overdueInterest,
			
			t.no_first_flag AS noFirstFlag,
			getBaseDateNameByCode('NO_FIRST_FLAG',t.no_first_flag,1) AS "noFirstFlagName",
			t.taxi_com_quantity AS taxiComQuantity,
			t.enterp_quantity AS enterpQuantity,
			t.guarantee_type AS guaranteeType,
			getBaseDateNameByCode('GUARANTEE_TYPE',t.guarantee_type,1) AS "guaranteeTypeName",
			t.guarantee_name AS guaranteeName,
			t.deliver_date AS deliverDate,
			t.mortgage_no AS mortgageNo,
			t.loan_contract_no AS loanContractNo,
			t.loan_start_date AS loanStartDate,
			t.loan_end_date AS loanEndDate,
			t.firstpay_rAate AS firstpayRAate,
			t.first_rate AS firstRate,
			t.own_liab_ratio AS ownLiabRatio,
			t.other_liab_ratio AS otherLiabRatio,
			t.recognizance AS recognizance,
			t.loan_amount AS loanAmount,
			t.loan_rate AS loanRate,
			t.per_repaid_amount AS perRepaidAmount,
			t.repy_fq AS repyFq,
			t.loan_purpost AS loanPurpost,
			getBaseDateNameByCode('LOANPURPOST',t.loan_purpost,1) AS "loanPurpostName",
			t.use_nature AS useNature,
			t.uses_tp AS usesTp,
			t.is_loan_account AS isLoanAccount,
			getBaseDateNameByCode('IS_LOAN_ACCOUNT',t.is_loan_account,1) AS "isLoanAccountName",
			t.loan_acount AS loanAcount,
			t.loan_acount_no AS loanAcountNo,
			t.loan_acount_bank AS loanAcountBank,
			t.loan_acount_bankNo AS loanAcountBankNo,
			t.apply_currency AS applyCurrency,
			t.apply_amt AS applyAmt,
			t.appl_nosInst AS applNosInst,
			t.apply_date AS applyDate,
			t.atrs_due_day AS atrsDueDay,
			t.next_repc_option AS nextRepcOption,
			t.fix_rateInd AS fixRateInd,
			getBaseDateNameByCode('FIX_RATE_IND',t.fix_rateInd,1) AS "fixRateIndName",
			t.int_adj_pct AS intAdjPct,
			t.cust_rate AS custRate,
			t.apply_purpost AS applyPurpost,
			t.apply_no AS applyNo,
			t.mkt_prod_type AS mktProdType,
			getBaseDateNameByCode('MKTPROD_TYPE',t.mkt_prod_type,1) AS "mktProdTypeName",
			t.contct AS contct,
			getBaseDateNameByCode('CONTCT',t.contct,1) AS "contctName",
			t.tel_num AS telNum,
			t.dler_ph AS dlerPh,
			t.link_type AS linkType,
			getBaseDateNameByCode('LINK_TYPE',t.link_type,1) AS "linkTypeName",
			t.link_name AS linkName,
			t.link_phone AS linkPhone,
			t.serial_no AS serialNo,
			t.risk_code AS riskCode,
			t.start_date AS startDate,
			t.end_date AS endDate,
			t.start_hour AS startHour,
			t.end_hour AS endHour,
			t.sum_amount AS sumAmount,
			t.sum_premium AS sumPremium,
			t.argu_solution AS arguSolution,
			getBaseDateNameByCode('ARGU_SOLUTION',t.argu_solution,1) AS "arguSolutionName",
			t.iscoin_type_flag AS iscoinTypeFlag,
			getBaseDateNameByCode('ISCOIN_TYPE_FLAG',t.iscoin_type_flag,1) AS "iscoinTypeFlagName",
			t.apply_Info_Id AS applyInfoId,
			t.first_paid AS firstPaid,
			t.tate_mode AS tateMode,
			getBaseDateNameByCode('TATEMODE',t.tate_mode,1) AS "tateModeName",
			t.apply_loans_amount AS applyLoansAmount,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_supplement_base_t t
		WHERE
			1 = 1
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询报价信息 -->
	<select id="findQuotedPrice" parameterType="com.xxm.it.business.vo.QuotedPriceVO" resultType="com.xxm.it.business.vo.QuotedPriceVO">
		SELECT
			t.quoted_price_id AS quotedPriceId,
			t.actual_Price AS actualPrice,
			t.pre_Rent_Rate_VL AS preRentRateVL,
			getBaseDateNameByCode('PRE_RENT_RATE',t.pre_Rent_Rate_VL,1) AS "preRentRateName",
			t.supplier_Cash_Pool AS supplierCashPool,
			t.sign_Date AS signDate,
			t.factory_Discount AS factoryDiscount,
			t.consulting_Fee AS consultingFee,
			t.plan_VL AS planVL,
			getBaseDateNameByCode('PLAN',t.plan_VL,1) AS "planName",
			t.purchase_Price AS purchasePrice,
			t.service_Charge AS serviceCharge,
			t.apply_Info_Id AS applyInfoId,
			t.down_payment AS downPayment,
			t.financing_amount AS financingAmount,
			t.rent_total_amount AS rentTotalAmount,
			t.interest_total_amount AS interestTotalAmount,
			t.amount_insured AS amountInsured,
			t.guide_price AS guidePrice,
			t.collect_premium AS collectPremium,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_quoted_price_t t
		WHERE
			1 = 1
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询还款计划 -->
	<select id="findRepaymentPlans" parameterType="com.xxm.it.business.vo.RepaymentPlanVO" resultType="com.xxm.it.business.vo.RepaymentPlanVO">
		SELECT
			t.repayment_plan_id AS repaymentPlanId,
			t.periods AS periods,
			t.return_Principal AS returnPrincipal,
			t.return_Interest AS returnInterest,
			t.return_Default_interest AS returnDefaultInterest,
			t.guarantee_Fee AS guaranteeFee,
			t.amount_Payable AS amountPayable,
			t.return_Date AS returnDate,
			t.remarks AS remarks,
			t.quoted_price_id AS quotedPriceId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_repayment_plan_t t
		WHERE
			1 = 1
		AND t.quoted_price_id=#{quotedPriceId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询车辆保险对象 -->
	<select id="findCarInsurance" parameterType="com.xxm.it.business.vo.CarInsuranceVO" resultType="com.xxm.it.business.vo.CarInsuranceVO">
		SELECT
			t.car_insurance_id AS carInsuranceId,
			t.car_Type_VL AS carTypeVL,
			getBaseDateNameByCode('CAR_TYPE',t.car_Type_VL,1) AS "carTypeVLName",
			t.third_Insurance_VL AS thirdInsuranceVL,
			getBaseDateNameByCode('THIRD_INSURANCE',t.third_Insurance_VL,1) AS "thirdInsuranceName",
			t.risk_Glass_Breakage AS riskGlassBreakage,
			t.other_Insurance1 AS otherInsurance1,
			t.other_Insurance2 AS otherInsurance2,
			t.other_Insurance3 AS otherInsurance3,
			t.other_Insurance4 AS otherInsurance4,
			t.other_Insurance5 AS otherInsurance5,
			t.major_Insurance_VLS AS majorInsuranceVLS,
			t.apply_Info_Id AS applyInfoId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_car_insurance_t t
		WHERE
			1 = 1
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询保证保险 -->
	<select id="findGuaranteeInsurance" parameterType="com.xxm.it.business.vo.GuaranteeInsuranceVO" resultType="com.xxm.it.business.vo.GuaranteeInsuranceVO">
		SELECT
			t.guarantee_insurance_id AS guaranteeInsuranceId,
			t.car_Type_VL AS carTypeVL,
			getBaseDateNameByCode('CAR_TYPE',t.car_Type_VL,1) AS "carTypeVLName",
			t.main_Insurance_Company AS mainInsuranceCompany,
			t.insurance_Company_VL AS insuranceCompanyVL,
			t.letter_Intent_No AS letterIntentNo,
			t.apply_Info_Id AS applyInfoId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_guarantee_insurance_t t
		WHERE
			1 = 1
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询担保人list -->
	<select id="findSponsors" parameterType="com.xxm.it.business.vo.SponsorVO" resultType="com.xxm.it.business.vo.SponsorVO">
		SELECT
			t.sponsor_id AS sponsorId,
			t.sponsor_Name AS sponsorName,
			t.sponsor_Sex AS sponsorSex,
			getBaseDateNameByCode('BAQSNG_SEX',t.sponsor_Sex,1) AS "sponsorSexName",
			t.cert_Type_VL AS certTypeVL,
			getBaseDateNameByCode('BAQSNG_PAPER_TYPE',t.cert_Type_VL,1) AS "certTypeName",
			t.cert_No AS certNo,
			t.sponsor_Mobile AS sponsorMobile,
			t.relation_VL AS relationVL,
			getBaseDateNameByCode('RELATION',t.relation_VL,1) AS "relationName",
			t.native_Place AS nativePlace,
			t.sponsor_Age AS sponsorAge,
			t.education_Type_VL AS educationTypeVL,
			getBaseDateNameByCode('EDUCATION_TYPE',t.education_Type_VL,1) AS "educationTypeName",
			t.company_Name AS companyName,
			t.company_Addr AS companyAddr,
			t.income AS income,
			t.company_Phone AS companyPhone,
			t.position AS position,
			t.other_Income AS otherIncome,
			t.telephone AS telephone,
			t.apply_Info_Id AS applyInfoId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			xxm_sponsor_t t
		WHERE
			1 = 1
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
<!-- 	修改基本信息补充 -->
	<update id="updateSupplementBase" parameterType="com.xxm.it.business.vo.SupplementBaseVO">
		UPDATE xxm_supplement_base_t SET 
			payment_Approach_VL = #{paymentApproachVL,jdbcType=VARCHAR},
			payment_Method_VL = #{paymentMethodVL,jdbcType=VARCHAR},
			payment_Periods = #{paymentPeriods,jdbcType=VARCHAR},
			is_Auto_Pay = #{isAutoPay,jdbcType=VARCHAR},
			interest_Calculated_VL = #{interestCalculatedVL,jdbcType=VARCHAR},
			interest = #{interest,jdbcType=VARCHAR},
			pay_Bearer_VL = #{payBearerVL,jdbcType=VARCHAR},
			service_Charge = #{serviceCharge,jdbcType=VARCHAR},
			payment_Date_Type_VL = #{paymentDateTypeVL,jdbcType=VARCHAR},
			payment_Date_Num = #{paymentDateNum,jdbcType=VARCHAR},
			guarantee_Calculated_VL = #{guaranteeCalculatedVL,jdbcType=VARCHAR},
			agent_Service_Charge = #{agentServiceCharge,jdbcType=VARCHAR},
			guarantee = #{guarantee,jdbcType=VARCHAR},
			rate_Of_Premium = #{rateOfPremium,jdbcType=VARCHAR},
			prepayment_VL = #{prepaymentVL,jdbcType=VARCHAR},
			default_Interest_VL = #{defaultInterestVL,jdbcType=VARCHAR},
			let_Off_Date = #{letOffDate,jdbcType=VARCHAR},
			overdue_Interest = #{overdueInterest,jdbcType=VARCHAR},
			
			no_first_flag = #{noFirstFlag,jdbcType=VARCHAR},
			taxi_com_quantity = #{taxiComQuantity,jdbcType=VARCHAR},
			enterp_quantity = #{enterpQuantity,jdbcType=VARCHAR},
			guarantee_type = #{guaranteeType,jdbcType=VARCHAR},
			guarantee_name = #{guaranteeName,jdbcType=VARCHAR},
			deliver_date = #{deliverDate,jdbcType=VARCHAR},
			mortgage_no = #{mortgageNo,jdbcType=VARCHAR},
			loan_contract_no = #{loanContractNo,jdbcType=VARCHAR},
			loan_start_date = #{loanStartDate,jdbcType=VARCHAR},
			loan_end_date = #{loanEndDate,jdbcType=VARCHAR},
			firstpay_rAate = #{firstpayRAate,jdbcType=VARCHAR},
			first_rate = #{firstRate,jdbcType=VARCHAR},
			own_liab_ratio = #{ownLiabRatio,jdbcType=VARCHAR},
			other_liab_ratio = #{otherLiabRatio,jdbcType=VARCHAR},
			recognizance = #{recognizance,jdbcType=VARCHAR},
			loan_amount = #{loanAmount,jdbcType=VARCHAR},
			loan_rate = #{loanRate,jdbcType=VARCHAR},
			per_repaid_amount = #{perRepaidAmount,jdbcType=VARCHAR},
			repy_fq = #{repyFq,jdbcType=VARCHAR},
			loan_purpost = #{loanPurpost,jdbcType=VARCHAR},
			use_nature = #{useNature,jdbcType=VARCHAR},
			uses_tp = #{usesTp,jdbcType=VARCHAR},
			is_loan_account = #{isLoanAccount,jdbcType=VARCHAR},
			loan_acount = #{loanAcount,jdbcType=VARCHAR},
			loan_acount_no = #{loanAcountNo,jdbcType=VARCHAR},
			loan_acount_bank = #{loanAcountBank,jdbcType=VARCHAR},
			loan_acount_bankNo = #{loanAcountBankNo,jdbcType=VARCHAR},
			apply_currency = #{applyCurrency,jdbcType=VARCHAR},
			apply_amt = #{applyAmt,jdbcType=VARCHAR},
			appl_nosInst = #{applNosInst,jdbcType=VARCHAR},
			apply_date = #{applyDate,jdbcType=VARCHAR},
			atrs_due_day = #{atrsDueDay,jdbcType=VARCHAR},
			next_repc_option = #{nextRepcOption,jdbcType=VARCHAR},
			fix_rateInd = #{fixRateInd,jdbcType=VARCHAR},
			int_adj_pct = #{intAdjPct,jdbcType=VARCHAR},
			cust_rate = #{custRate,jdbcType=VARCHAR},
			apply_purpost = #{applyPurpost,jdbcType=VARCHAR},
			apply_no = #{applyNo,jdbcType=VARCHAR},
			mkt_prod_type = #{mktProdType,jdbcType=VARCHAR},
			contct = #{contct,jdbcType=VARCHAR},
			tel_num = #{telNum,jdbcType=VARCHAR},
			dler_ph = #{dlerPh,jdbcType=VARCHAR},
			link_type = #{linkType,jdbcType=VARCHAR},
			link_name = #{linkName,jdbcType=VARCHAR},
			link_phone = #{linkPhone,jdbcType=VARCHAR},
			serial_no = #{serialNo,jdbcType=VARCHAR},
			risk_code = #{riskCode,jdbcType=VARCHAR},
			start_date = #{startDate,jdbcType=VARCHAR},
			end_date = #{endDate,jdbcType=VARCHAR},
			start_hour = #{startHour,jdbcType=VARCHAR},
			end_hour = #{endHour,jdbcType=VARCHAR},
			sum_amount = #{sumAmount,jdbcType=VARCHAR},
			sum_premium = #{sumPremium,jdbcType=VARCHAR},
			argu_solution = #{arguSolution,jdbcType=VARCHAR},
			iscoin_type_flag = #{iscoinTypeFlag,jdbcType=VARCHAR},
			first_paid = #{firstPaid,jdbcType=VARCHAR},
			tate_mode = #{tateMode,jdbcType=VARCHAR},
			apply_loans_amount = #{applyLoansAmount,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			supplement_Base_Id = #{supplementBaseId,jdbcType=VARCHAR}
	</update>
	
<!-- 修改报价信息 -->
	<update id="updateQuotedPrice" parameterType="com.xxm.it.business.vo.QuotedPriceVO">
		UPDATE xxm_quoted_price_t SET 
			actual_Price = #{actualPrice,jdbcType=VARCHAR},
			pre_Rent_Rate_VL = #{preRentRateVL,jdbcType=VARCHAR},
			supplier_Cash_Pool = #{supplierCashPool,jdbcType=VARCHAR},
			sign_Date = #{signDate,jdbcType=VARCHAR},
			factory_Discount = #{factoryDiscount,jdbcType=VARCHAR},
			consulting_Fee = #{consultingFee,jdbcType=VARCHAR},
			plan_VL = #{planVL,jdbcType=VARCHAR},
			purchase_Price = #{purchasePrice,jdbcType=VARCHAR},
			service_Charge = #{serviceCharge,jdbcType=VARCHAR},
			down_payment = #{downPayment,jdbcType=VARCHAR},
			financing_amount = #{financingAmount,jdbcType=VARCHAR},
			rent_total_amount = #{rentTotalAmount,jdbcType=VARCHAR},
			interest_total_amount = #{interestTotalAmount,jdbcType=VARCHAR},
			amount_insured = #{amountInsured,jdbcType=VARCHAR},
			guide_price = #{guidePrice,jdbcType=VARCHAR},
			collect_premium = #{collectPremium,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			quoted_price_id = #{quotedPriceId,jdbcType=VARCHAR}
	</update>
	
	<!-- 修改车辆保险信息-->
	<update id="updateCarInsurance" parameterType="com.xxm.it.business.vo.CarInsuranceVO">
		UPDATE xxm_car_insurance_t SET 
			car_Type_VL = #{carTypeVL,jdbcType=VARCHAR},
			third_Insurance_VL = #{thirdInsuranceVL,jdbcType=VARCHAR},
			risk_Glass_Breakage = #{riskGlassBreakage,jdbcType=VARCHAR},
			other_Insurance1 = #{otherInsurance1,jdbcType=VARCHAR},
			other_Insurance2 = #{otherInsurance2,jdbcType=VARCHAR},
			other_Insurance3 = #{otherInsurance3,jdbcType=VARCHAR},
			other_Insurance4 = #{otherInsurance4,jdbcType=VARCHAR},
			other_Insurance5 = #{otherInsurance5,jdbcType=VARCHAR},
			major_Insurance_VLS = #{majorInsuranceVLS,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			car_insurance_id = #{carInsuranceId,jdbcType=VARCHAR}
	</update>
	
	<!-- 修改保证保险信息-->
	<update id="updateGuaranteeInsurance" parameterType="com.xxm.it.business.vo.GuaranteeInsuranceVO">
		UPDATE xxm_guarantee_insurance_t SET 
			car_Type_VL = #{carTypeVL,jdbcType=VARCHAR},
			main_Insurance_Company = #{mainInsuranceCompany,jdbcType=VARCHAR},
			insurance_Company_VL = #{insuranceCompanyVL,jdbcType=VARCHAR},
			letter_Intent_No = #{letterIntentNo,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			guarantee_insurance_id = #{guaranteeInsuranceId,jdbcType=VARCHAR}
	</update>
	
	<delete id="deleteSponsor" parameterType="com.xxm.it.business.vo.SponsorVO">
		delete from xxm_sponsor_t where apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</delete>
	
	<!-- 删除申请信息 -->
	<delete id="deleteApplyInfo" parameterType="com.xxm.it.business.vo.ApplyVO">
		UPDATE xxm_apply_info_t SET 
			apply_info_status= #{applyInfoStatus, jdbcType=VARCHAR}
		WHERE apply_Info_Id in 
		<foreach collection="applyInfoIds" item="item" index="index" separator="," open="(" close=")">  
			#{item}
		</foreach> 
	</delete>
	
	<!-- 新增投保单归属机构信息 -->
	<insert id="addMsCoin" parameterType="com.xxm.it.business.vo.MsCoinVO" useGeneratedKeys="true" keyProperty="coinId">
		 INSERT INTO ms_coin (
			maincomcode,
			depcomcode,
			mainhandlercode,
			dephandlercode,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{maincomcode,jdbcType=VARCHAR},
				#{depcomcode,jdbcType=VARCHAR},
				#{mainhandlercode,jdbcType=VARCHAR},
				#{dephandlercode,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改投保单归属机构信息-->
	<update id="updateMsCoin" parameterType="com.xxm.it.business.vo.MsCoinVO">
		UPDATE ms_coin SET 
			maincomcode = #{maincomcode,jdbcType=VARCHAR},
			depcomcode = #{depcomcode,jdbcType=VARCHAR},
			mainhandlercode = #{mainhandlercode,jdbcType=VARCHAR},
			dephandlercode = #{dephandlercode,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			coin_id = #{coinId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增方案信息 -->
	<insert id="addMsInsuredplan" parameterType="com.xxm.it.business.vo.MsInsuredPlanVO" useGeneratedKeys="true" keyProperty="insuredPlanId">
		 INSERT INTO ms_insuredplan (
			ration_type,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{rationType,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改方案信息-->
	<update id="updateMsInsuredplan" parameterType="com.xxm.it.business.vo.MsInsuredPlanVO">
		UPDATE ms_insuredplan SET 
			ration_type = #{rationType,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			insured_plan_id = #{insuredPlanId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增条款信息 -->
	<insert id="addMsScheme" parameterType="com.xxm.it.business.vo.MsSchemeVO" useGeneratedKeys="true" keyProperty="schemeId">
		 INSERT INTO ms_scheme (
			schemeCode,
			schemeAmount,
			schemePremium,
			insured_plan_id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{schemeCode,jdbcType=VARCHAR},
				#{schemeAmount,jdbcType=VARCHAR},
				#{schemePremium,jdbcType=VARCHAR},
				#{insuredPlanId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改条款信息-->
	<update id="updateMsScheme" parameterType="com.xxm.it.business.vo.MsSchemeVO">
		UPDATE ms_scheme SET 
			schemeCode = #{schemeCode,jdbcType=VARCHAR},
			schemeAmount = #{schemeAmount,jdbcType=VARCHAR},
			schemePremium = #{schemePremium,jdbcType=VARCHAR},
<!-- 			insured_plan_id = #{insuredPlanId,jdbcType=VARCHAR}, -->
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			scheme_id = #{schemeId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增特别约定信息 -->
	<insert id="addMsEngage" parameterType="com.xxm.it.business.vo.MsEngageVO" useGeneratedKeys="true" keyProperty="engageId">
		 INSERT INTO ms_engage (
			engageCode,
			engageName,
			engagedesc,
			insured_plan_id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{engageCode,jdbcType=VARCHAR},
				#{engageName,jdbcType=VARCHAR},
				#{engagedesc,jdbcType=VARCHAR},
				#{insuredPlanId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改特别约定信息 -->
	<update id="updateMsEngage" parameterType="com.xxm.it.business.vo.MsEngageVO">
		UPDATE ms_engage SET 
			engageCode = #{engageCode,jdbcType=VARCHAR},
			engageName = #{engageName,jdbcType=VARCHAR},
			engagedesc = #{engagedesc,jdbcType=VARCHAR},
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			engage_id = #{engageId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增被保人-->
	<insert id="addMsInsured" parameterType="com.xxm.it.business.vo.MsInsuredVO" useGeneratedKeys="true" keyProperty="insuredId">
		 INSERT INTO ms_insured (
			insured_seq_no,
			insured_name,
			insuredId_type,
			insuredId_no,
			bankcode,
			apply_Info_Id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{insuredSeqNo,jdbcType=VARCHAR},
				#{insuredName,jdbcType=VARCHAR},
				#{insuredIdType,jdbcType=VARCHAR},
				#{insuredIdNo,jdbcType=VARCHAR},
				#{bankcode,jdbcType=VARCHAR},
				#{applyInfoId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改被保人 -->
	<update id="updateMsInsured" parameterType="com.xxm.it.business.vo.MsInsuredVO">
		UPDATE ms_insured SET 
			insured_seq_no = #{insuredSeqNo,jdbcType=VARCHAR},
			insured_name = #{insuredName,jdbcType=VARCHAR},
			insuredId_type = #{insuredIdType,jdbcType=VARCHAR},
			insuredId_no = #{insuredIdNo,jdbcType=VARCHAR},
			bankcode = #{bankcode,jdbcType=VARCHAR},
<!-- 			apply_Info_Id = #{applyInfoId,jdbcType=VARCHAR}, -->
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			insured_id = #{insuredId,jdbcType=VARCHAR}
	</update>
	
	<!-- 新增受益人-->
	<insert id="addMsBeneficiary" parameterType="com.xxm.it.business.vo.MsBeneficiaryVO" useGeneratedKeys="true" keyProperty="beneficiaryId">
		 INSERT INTO ms_beneficiary (
			beneficiary_seq_no,
			beneficiary,
			insured_id,
			create_by,
			create_date,
			last_update_by,
			last_update_date
		)
		VALUES
			(
				#{beneficiarySeqNo,jdbcType=VARCHAR},
				#{beneficiary,jdbcType=VARCHAR},
				#{insuredId,jdbcType=VARCHAR},
				#{createBy,jdbcType=VARCHAR},
				sysdate(),
				#{lastUpdateBy,jdbcType=VARCHAR},
				sysdate()
			)
	</insert>
	
	<!-- 修改受益人 -->
	<update id="updateMsBeneficiary" parameterType="com.xxm.it.business.vo.MsBeneficiaryVO">
		UPDATE ms_beneficiary SET 
			beneficiary_seq_no = #{beneficiarySeqNo,jdbcType=VARCHAR},
			beneficiary = #{beneficiary,jdbcType=VARCHAR},
<!-- 			insured_id = #{insuredId,jdbcType=VARCHAR}, -->
			last_update_by = #{lastUpdateBy,jdbcType=VARCHAR},
			last_update_date = sysdate()
		WHERE
			beneficiary_id = #{beneficiaryId,jdbcType=VARCHAR}
	</update>
	
	<!-- 查询投保单归属机构信息 -->
	<select id="findMsCoin" parameterType="com.xxm.it.business.vo.MsCoinVO" resultType="com.xxm.it.business.vo.MsCoinVO">
		SELECT
			t.coin_id AS coinId,
			t.maincomcode AS maincomcode,
			t.depcomcode AS depcomcode,
			t.mainhandlercode AS mainhandlercode,
			t.dephandlercode AS dephandlercode,
			t.apply_Info_Id AS applyInfoId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			ms_coin t
		WHERE
			1 = 1
<!-- 		AND t.coin_id=#{coinId,jdbcType=VARCHAR} -->
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询方案信息 -->
	<select id="findMsInsuredPlan" parameterType="com.xxm.it.business.vo.MsInsuredPlanVO" resultType="com.xxm.it.business.vo.MsInsuredPlanVO">
		SELECT
			t.insured_plan_id AS insuredPlanId,
			t.ration_type AS rationType,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate,
			t.apply_Info_Id AS applyInfoId
		FROM
			ms_insuredplan t
		WHERE
			1 = 1
<!-- 		AND t.insured_plan_id=#{insuredPlanId,jdbcType=VARCHAR} -->
		AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询条款信息 -->
	<select id="findMsSchemes" parameterType="com.xxm.it.business.vo.MsSchemeVO" resultType="com.xxm.it.business.vo.MsSchemeVO">
		SELECT
			t.scheme_id AS schemeId,
			t.schemeCode AS schemeCode,
			t.schemeAmount AS schemeAmount,
			t.schemePremium AS schemePremium,
			t.insured_plan_id AS insuredPlanId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			ms_scheme t
		WHERE
			1 = 1
<!-- 		AND t.scheme_id=#{schemeId,jdbcType=VARCHAR} -->
			AND t.insured_plan_id=#{insuredPlanId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询约定特殊信息 -->
	<select id="findMsEngages" parameterType="com.xxm.it.business.vo.MsEngageVO" resultType="com.xxm.it.business.vo.MsEngageVO">
		SELECT
			t.engage_id AS engageId,
			t.engageCode AS engageCode,
			t.engageName AS engageName,
			t.engagedesc AS engagedesc,
			t.insured_plan_id AS insuredPlanId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			ms_engage t
		WHERE
			1 = 1
<!-- 		AND t.engage_id=#{engageId,jdbcType=VARCHAR} -->
			AND t.insured_plan_id=#{insuredPlanId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询被保人信息 -->
	<select id="findMsInsured" parameterType="com.xxm.it.business.vo.MsInsuredVO" resultType="com.xxm.it.business.vo.MsInsuredVO">
		SELECT
			t.insured_id AS insuredId,
			t.insured_seq_no AS insuredSeqNo,
			t.insured_name AS insuredName,
			t.insuredId_type AS insuredIdType,
			t.insuredId_no AS insuredIdNo,
			t.bankcode AS bankcode,
			t.apply_Info_Id AS applyInfoId,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate
		FROM
			ms_insured t
		WHERE
			1 = 1
<!-- 		AND t.insured_id=#{insuredId,jdbcType=VARCHAR} -->
			AND t.apply_Info_Id=#{applyInfoId,jdbcType=VARCHAR}
	</select>
	
	<!-- 查询受益人信息 -->
	<select id="findMsBeneficiary" parameterType="com.xxm.it.business.vo.MsBeneficiaryVO" resultType="com.xxm.it.business.vo.MsBeneficiaryVO">
		SELECT
			t.beneficiary_id AS beneficiaryId,
			t.beneficiary_seq_no AS beneficiarySeqNo,
			t.beneficiary AS beneficiary,
			t.create_by AS createBy,
			t.create_date AS createDate,
			t.last_update_by AS lastUpdateBy,
			t.last_update_date AS lastUpdateDate,
			t.insured_id AS insuredId
		FROM
			ms_beneficiary t
		WHERE
			1 = 1
<!-- 		AND t.beneficiary_id=#{beneficiaryId,jdbcType=VARCHAR} -->
		AND t.insured_id=#{insuredId,jdbcType=VARCHAR}
	</select>
</mapper>